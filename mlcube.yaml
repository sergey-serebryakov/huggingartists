name: "huggingartist"
description: "MLCommons Hugging Face Artist MLCube"

platform:
  accelerator_count: 1


docker:
  image: "mlcommons/huggingartist:0.0.1"
  gpu_args: '--runtime=nvidia'


tasks:
  create_dataset:
    entrypoint: "python3 /mlcube/huggingartists/tasks/create_dataset.py"
    parameters:
      inputs:
        params: {type: "file", default: "params.yaml"}
      outputs:
        workspace_dir: {type: "directory", default: "${workspace}"}
        cache_dir: {type: "directory", default: "/home/serebrya/.cache/huggingface/datasets"}
  split_dataset:
    entrypoint: "python3 /mlcube/huggingartists/tasks/split_dataset.py"
    parameters:
      inputs:
        params: { type: "file", default: "params.yaml" }
      outputs:
        workspace_dir: { type: "directory", default: "${workspace}" }
  finetune_model:
    entrypoint: "python3 /mlcube/huggingartists/tasks/finetune_model.py"
    parameters:
      inputs:
        params: { type: "file", default: "params.yaml" }
      outputs:
        workspace_dir: { type: "directory", default: "${workspace}" }
        cache_dir: {type: "directory", default: "/home/serebrya/.cache/huggingface/hub"}
  generate_lyrics:
    entrypoint: "python3 /mlcube/huggingartists/tasks/generate_lyrics.py"
    parameters:
      inputs:
        params: { type: "file", default: "params.yaml" }
      outputs:
        workspace_dir: { type: "directory", default: "${workspace}" }
        cache_dir: { type: "directory", default: "/home/serebrya/.cache/huggingface/hub" }
